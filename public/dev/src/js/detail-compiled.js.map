{"version":3,"sources":["detail.js"],"names":[],"mappings":";;;;;;AAOA,IAAI,aAAa;AACb,YAAQ;AACJ,cAAM,EADF;AAEJ,cAAM;AAFF,KADK;AAKb,cAAU;AACN,gBAAQ,EAAE,gBAAF,CADF;AAEN,kBAAS,EAAE,WAAF,CAFH;AAGN,eAAO,EAAE,eAAF,CAHD;AAIN,aAAK,EAAE,aAAF,CAJC;AAKN,eAAO,EAAE,eAAF,CALD;AAMN,iBAAS,EAAE,gBAAF,CANH;AAON,aAAK,EAAE,iBAAF,CAPC;AAQN,mBAAW,EAAE,oBAAF;;AARL,KALG;AAgBb,UAAM,YAAY;AACd,aAAK,SAAL;AACA,aAAK,UAAL;AACH,KAnBY;AAoBb,gBAAY,YAAW;AACnB,YAAI,OAAO,KAAK,QAAL,CAAc,SAAzB;AACA,aAAK,QAAL,CAAc,QAAd,CAAuB,EAAvB,CAA0B,OAA1B,EAAmC,YAAW;AAC3C,cAAE,eAAF,EAAmB,OAAnB,CAA2B,OAA3B;AACF,SAFD;AAGH,KAzBY;;;AA4Bb,eAAW,YAAY;AACnB,YAAI,OAAO,IAAX;AACA,eAAO,EAAE,IAAF,CAAO;AACV,iBAAK;AADK,SAAP,EAEJ,OAFI,CAEI,UAAU,GAAV,EAAe;AACtB,iBAAK,MAAL,CAAY,IAAZ,GAAoB,OAAO,GAAP,KAAc,QAAd,GAAwB,KAAK,KAAL,CAAW,GAAX,CAAxB,GAAyC,GAA7D;AACA,gBAAI,KAAK,KAAK,KAAL,EAAT;AACA,iBAAK,MAAL,CAAY,IAAZ,GAAmB,KAAK,YAAL,CAAkB,EAAlB,CAAnB;;AAEA,iBAAK,QAAL;AACH,SARM,EAQJ,KARI,CAQE,UAAU,KAAV,EAAiB;;AAEzB,SAVM,CAAP;AAWH,KAzCY;AA0Cb,kBAAc,UAAU,EAAV,EAAc;AACxB,YAAI,OAAO,EAAX;;;;;;;;AAQA,aAAI,IAAI,IAAG,CAAP,EAAU,MAAM,KAAK,MAAL,CAAY,IAAZ,CAAiB,MAArC,EAA6C,IAAG,GAAhD,EAAqD,GAArD,EAAyD;AACrD,gBAAI,OAAO,KAAK,MAAL,CAAY,IAAZ,CAAiB,CAAjB,CAAX;AACA,gBAAI,MAAM,KAAK,EAAf,EAAmB;AACf,uBAAO,IAAP;AACH;AACJ;AACD,eAAO,IAAP;AACH,KA1DY;;AA4Db,WAAO,YAAY;AACf,eAAO,mBAAkB,IAAlB,CAAuB,SAAS,IAAhC,EAAsC,CAAtC;AAAP;AACH,KA9DY;AA+Db,cAAU,YAAY;AAClB,aAAK,YAAL;AACA,aAAK,WAAL;AACA,aAAK,WAAL;AACA,aAAK,aAAL;AACA,aAAK,gBAAL;AACA,aAAK,SAAL;AACH,KAtEY;AAuEb,kBAAc,YAAY;AACtB,YAAI,SAAS,KAAK,QAAL,CAAc,MAA3B;AACA,YAAI,OAAO,KAAK,MAAL,CAAY,IAAvB;AACA,YAAI,QAAQ,KAAK,KAAjB;AACA,eAAO,GAAP,CAAW;AACP,wBAAY,UAAU,KAAK,aAAf,GAA+B;AADpC,SAAX;AAGA,eAAO,IAAP,CAAY,IAAZ,EAAkB,IAAlB,CAAuB,KAAK,KAA5B;AACA,eAAO,IAAP,CAAY,WAAZ,EAAyB,IAAzB,CAA8B,KAAK,QAAnC;AACA,eAAO,IAAP,CAAY,mBAAiB,KAAjB,GAAuB,GAAnC,EAAwC,QAAxC,CAAiD,QAAjD;AAEH,KAlFY;;AAoFb,iBAAa,YAAY;AACrB,YAAI,QAAQ,KAAK,QAAL,CAAc,KAA1B;AACA,YAAI,OAAO,KAAK,MAAL,CAAY,IAAvB;;AAEA,cAAM,IAAN,CAAW,QAAX,EAAqB,IAArB,CAA0B,QAAM,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,EAAiC,IAAjC,CAAsC,SAAtC,CAAN,GAAuD,MAAjF;AACA,YAAI,QAAQ,EAAZ;AACA,YAAG,KAAK,UAAL,CAAgB,MAAnB,EAA0B;AACtB,cAAE,IAAF,CAAO,KAAK,UAAL,CAAgB,KAAhB,CAAsB,OAAtB,CAAP,EAAuC,UAAU,CAAV,EAAa,GAAb,EAAkB;AACrD,yBAAS,eAAe,GAAf,GAAqB,YAA9B;AACH,aAFD;AAGH;AACD,cAAM,IAAN,CAAW,aAAX,EAA0B,IAA1B,CAA+B,KAA/B;AACH,KAhGY;;;;AAoGb,sBAAkB,YAAY;AAC1B,YAAI,QAAQ,KAAK,QAAL,CAAc,GAA1B;AACA,YAAI,OAAO,KAAK,MAAL,CAAY,IAAvB;AACA,YAAI,UAAU,KAAK,QAAL,CAAc,KAAd,CAAoB,OAApB,CAAd;AACA,YAAI,OAAO,KAAK,SAAL,CAAe,KAAf,CAAqB,OAArB,CAAX;AACA,YAAI,SAAS,EAAb;;AAEA,UAAE,IAAF,CAAO,KAAK,UAAL,CAAgB,KAAhB,CAAsB,OAAtB,CAAP,EAAuC,UAAU,CAAV,EAAa,KAAb,EAAoB;AACvD,gBAAI,MAAM,KAAK,MAAL,KAAc,QAAQ,MAAtB,GAA6B,CAAvC;AACA,gBAAI,KAAK,QAAQ,MAAR,CAAe,GAAf,EAAmB,CAAnB,CAAT;;AAEA,sBAAU,wDAAsD,EAAtD,GAAyD,KAAzD,GACN,MADM,GACC,KADD,GACO,OADP,IAEL,KAAK,CAAL,KAAS,SAAT,GAAoB,QAAM,KAAK,CAAL,CAAN,GAAc,MAAlC,GAA2C,EAFtC,IAGV,QAHA;AAIH,SARD;AASA,cAAM,IAAN,CAAW,WAAX,EAAwB,IAAxB,CAA6B,MAA7B;AACH,KArHY;AAsHb,iBAAa,YAAY;AACrB,YAAI,QAAQ,KAAK,QAAL,CAAc,KAA1B;AACA,YAAI,OAAO,KAAK,MAAL,CAAY,IAAvB;AACA,YAAI,OAAO,EAAX;YACI,QAAQ,KAAK,UAAL,CAAgB,KAAhB,CAAsB,OAAtB,CADZ;YAEI,QAAQ,KAAK,eAAL,CAAqB,KAArB,CAA2B,OAA3B,CAFZ;AAGA,UAAE,IAAF,CAAO,KAAP,EAAc,UAAU,CAAV,EAAa,GAAb,EAAkB;AAC5B,oBAAQ,4BACJ,YADI,GACW,GADX,GACiB,WADjB,GAEJ,KAFI,GAEI,MAAM,CAAN,CAFJ,GAEe,YAFvB;AAGH,SAJD;AAKA,YAAI,EAAE,IAAF,CAAO,KAAK,UAAZ,EAAwB,MAA5B,EAAoC;AAChC,kBAAM,WAAN,CAAkB,QAAlB;AACA,kBAAM,IAAN,CAAW,YAAX,EAAyB,IAAzB,CAA8B,IAA9B;AACA,kBAAM,GAAN,CAAU;AACN,oCAAoB,SAAS,KAAK,OAAd,GAAwB;AADtC,aAAV;AAGH;AAEJ,KAzIY;;AA2Ib,mBAAe,YAAY;AACvB,YAAI,UAAU,KAAK,QAAL,CAAc,OAA5B;AACA,YAAI,OAAO,KAAK,MAAL,CAAY,IAAvB;AACA,YAAI,QAAQ,EAAZ;AACA,UAAE,IAAF,CAAO,KAAK,aAAL,CAAmB,KAAnB,CAAyB,OAAzB,CAAP,EAA0C,UAAU,CAAV,EAAa,GAAb,EAAkB;AACxD,qBAAS,eAAe,GAAf,GAAqB,YAA9B;AACH,SAFD;;AAIA,YAAI,KAAK,aAAL,IAAsB,KAAK,aAAL,CAAmB,MAA7C,EAAqD;AACjD,oBAAQ,WAAR,CAAoB,QAApB;AACA,oBAAQ,IAAR,CAAa,WAAb,EAA0B,IAA1B,CAA+B,KAA/B;AAEH;AACJ,KAxJY;AAyJb,eAAW,YAAY;AACnB,YAAI,MAAM,KAAK,QAAL,CAAc,GAAxB;AACA,YAAI,OAAO,KAAK,MAAL,CAAY,IAAvB;AACA,YAAI,cAAc,KAAK,OAAL,CAAa,KAAb,CAAmB,OAAnB,CAAlB;AACA,YAAI,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,MAAjC,EAAyC;AACrC,gBAAI,WAAJ,CAAgB,QAAhB;AACA,gBAAI,IAAJ,CAAS,GAAT,EACK,IADL,CACU,YAAY,CAAZ,CADV,EAEK,IAFL,CAEU,MAFV,EAEkB,YAAY,CAAZ,CAFlB;AAGH;AAGJ;;AArKY,CAAjB;;AAyKA,WAAW,IAAX","file":"detail-compiled.js","sourcesContent":["/**\n * date: 2016年10月 9日\n * author: zhangaifei\n * 详情页逻辑\n */\n\n\nvar detailPage = {\n    config: {\n        list: [],\n        data: null\n    },\n    elements: {\n        header: $('.detail-header'),\n        applyBtn:$('.open-btn'),\n        intro: $('.detail-intro'),\n        adv: $('.detail-adv'),\n        cases: $('.detail-cases'),\n        process: $('.apply-process'),\n        doc: $('.detail-dev-doc'),\n        applyForm: $('#counsel-container')\n\n    },\n    init: function () {\n        this.fetchData();\n        this.bindEvents();\n    },\n    bindEvents: function (){\n        var form = this.elements.applyForm;\n        this.elements.applyBtn.on('click', function (){\n           $('.consultation').trigger('click')\n        })\n    },\n    //获取页面展示数据\n    //tip: 目前没有服务接口 数据写死\n    fetchData: function () {\n        var self = this;\n        return $.ajax({\n            url: '/html/data/list.json'\n        }).success(function (res) {\n            self.config.list = (typeof res ==='string'?(JSON.parse(res)):res);\n            var id = self.getId();\n            self.config.data = self.findItemById(id)\n            //console.log(self.config.data)\n            self.renderUI()\n        }).error(function (error) {\n            //console.log(error)\n        })\n    },\n    findItemById: function (id) {\n        var _res = {};\n        // $.each(this.config.list, function (index, item) {\n        //     if (id == item.ID) {\n        //         _res = item;\n        //     } else {\n        //         //没有找到 怎么办？？\n        //     }\n        // })\n        for(var i= 0 ,len = this.config.list.length; i< len; i++){\n            var item = this.config.list[i];\n            if (id == item.ID) {\n                _res = item;\n            }\n        }\n        return _res;\n    },\n    //从url中获取id\n    getId: function () {\n        return /(\\?|&)id=(\\w+)/g.exec(location.href)[2];\n    },\n    renderUI: function () {\n        this.renderHeader()\n        this.renderIntro();\n        this.renderCases();\n        this.renderProcess();\n        this.renderAdvantages();\n        this.renderDoc();\n    },\n    renderHeader: function () {\n        var header = this.elements.header;\n        var data = this.config.data;\n        var stars = data.stars;\n        header.css({\n            background: 'url(\"' + data.header_banner + '\")'\n        })\n        header.find('h1').text(data.title);\n        header.find('.sub_desc').text(data.sub_desc);\n        header.find('.icon-star:lt('+stars+')').addClass('active')\n\n    },\n\n    renderIntro: function () {\n        var intro = this.elements.intro;\n        var data = this.config.data;\n        //console.log(data.introduction)\n        intro.find('.intro').html('<p>'+data.introduction.split(/={3,}/).join('</p><p>')+'</p>');\n        var _imgs = '';\n        if(data.intro_imgs.length){\n            $.each(data.intro_imgs.split(/={3,}/), function (i, src) {\n                _imgs += '<img src=\"' + src + '\" alt=\"\"/>';\n            })        \n        }\n        intro.find('.intro_imgs').html(_imgs);\n    },\n    /**\n     * 产品特色的背景图是随机出现的\n     */\n    renderAdvantages: function () {\n        var intro = this.elements.adv;\n        var data = this.config.data;\n        var advImgs = data.adv_imgs.split(/={3,}/);\n        var desc = data.adv_descs.split(/={3,}/);\n        var _items = '';\n\n        $.each(data.adv_titles.split(/={3,}/), function (i, title) {\n            var rmd = Math.random()*advImgs.length|0;\n            var bg = advImgs.splice(rmd,1);\n            //console.log(rmd,advImgs.length);\n            _items += '<div class=\"adv-item\" style=\"background-image: url('+bg+')\">'+\n                '<h2>'+title+'</h2>'+\n                (desc[i]!=undefined?('<p>'+desc[i]+'</p>'):(''))+\n            '</div>';\n        })\n        intro.find('.adv-imgs').html(_items);\n    },\n    renderCases: function () {\n        var cases = this.elements.cases;\n        var data = this.config.data;\n        var list = '',\n            icons = data.case_icons.split(/={3,}/),\n            texts = data.case_icons_text.split(/={3,}/);\n        $.each(icons, function (i, src) {\n            list += '<div class=\"case-item\">' +\n                '<img src=\"' + src + '\" alt=\"\">' +\n                '<p>' + texts[i] + '</p></div>'\n        })\n        if ($.trim(data.case_icons).length) {\n            cases.removeClass('hidden');\n            cases.find('.case-list').html(list);\n            cases.css({\n                'background-image': 'url(' + data.case_bg + ')'\n            })\n        }\n\n    },\n\n    renderProcess: function () {\n        var process = this.elements.process;\n        var data = this.config.data;\n        var _imgs = '';\n        $.each(data.apply_process.split(/={3,}/), function (i, src) {\n            _imgs += '<img src=\"' + src + '\" alt=\"\"/>';\n        })\n        //console.log(_imgs.length)\n        if (data.apply_process && data.apply_process.length) {\n            process.removeClass('hidden');\n            process.find('.pro-imgs').html(_imgs);\n\n        }\n    },\n    renderDoc: function () {\n        var doc = this.elements.doc;\n        var data = this.config.data;\n        var textAndLink = data.dev_doc.split(/={3,}/)\n        if (data.dev_doc && data.dev_doc.length) {\n            doc.removeClass('hidden')\n            doc.find('a')\n                .text(textAndLink[0])\n                .attr('href', textAndLink[1]);\n        }\n\n\n    }\n\n}\n\ndetailPage.init();\n"]}